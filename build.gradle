/*
 * This file was generated by the Gradle 'init' task.
 */

allprojects {
   // apply plugin: 'dependency-management'
    group = 'com.van'
    version = '0.0.2-SNAPSHOT'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    repositories {
        mavenCentral()
        mavenLocal()
        maven {
            url = 'http://repo.maven.apache.org/maven2'
        }
    }

    sourceCompatibility = '1.8'

 /*   publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
            }
        }
    }*/

    sourceSets {
        integrationTest {
            java {
                compileClasspath += main.output + test.output
                runtimeClasspath += main.output + test.output
                srcDir file('src/integration-test/java')
            }
            resources.srcDir file('src/integration-test/resources')
        }
    }

    configurations {
        integrationTestImplementation.extendsFrom testImplementation
        integrationTestRuntime.extendsFrom testRuntime
        integrationTestRuntimeOnly.extendsFrom testRuntimeOnly
    }

    task integrationTest(type: Test) {
        description = 'Runs the integration tests.'
        testClassesDirs = sourceSets.integrationTest.output.classesDirs
        classpath = sourceSets.integrationTest.runtimeClasspath
    }

    test {
        useJUnitPlatform()
    }

    integrationTest {
        useJUnitPlatform()
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }

    dependencies {
        compile 'org.slf4j:slf4j-api:1.7.26'
        compile 'org.slf4j:slf4j-log4j12:1.7.26'

        testCompile 'org.slf4j:slf4j-api:1.7.26'
        testCompile 'org.slf4j:slf4j-log4j12:1.7.26'
        testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.3.2'
        testImplementation 'org.mockito:mockito-junit-jupiter:2.24.0'
    }

    configurations.all {
        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'
        exclude group: 'org.springframework.boot', module: 'logback-classic'
        //exclude group: 'junit', module: 'junit'
    }
}


